<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebURL - PercentEncodeSetProtocol</title>
    <link rel="stylesheet" type="text/css" href="/swift-url/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/swift-url/">
            <strong>
                WebURL
            </strong>
            <span>Documentation</span>
        </a>
        <sup>Beta</sup>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#default implementations">Default Implementations</a><ul><li class="function"><a href="#percentencodesetprotocol.substitute(ascii:)">substitute(ascii:​)</a></li><li class="function"><a href="#percentencodesetprotocol.unsubstitute(ascii:)">unsubstitute(ascii:​)</a></li></ul></li><li><a href="#requirements">Requirements</a><ul><li class="function"><a href="#percentencodesetprotocol.shouldpercentencode(ascii:)">should​Percent​Encode(ascii:​)</a></li><li class="function"><a href="#percentencodesetprotocol.substitute(ascii:)">substitute(ascii:​)</a></li><li class="function"><a href="#percentencodesetprotocol.unsubstitute(ascii:)">unsubstitute(ascii:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Protocol</small>
    <code class="name">Percent​Encode​Set​Protocol</code>
</h1>

<div class="declaration">
<pre class="highlight"><code><span class="keyword">public</span> <span class="keyword">protocol</span> <span class="type">PercentEncodeSetProtocol</span> </code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>A set of characters which should be transformed or substituted in order to percent-encode (or percent-escape) an ASCII string.</p>

</div>
<div class="discussion">
    <p>Conforming types should be exposed as computed properties of <code>PercentEncodeSet</code>, and encode-sets which substitute characters
should additionally be added to <code>PercentDecodeSet</code>. These properties are never called, and only used to create a concise,
<code>KeyPath</code>-based generic interface.</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">MyEncodeSet</span>: <span class="type">PercentEncodeSetProtocol</span> {
  <span class="comment">// ...</span>
}

<span class="keyword">extension</span> <a href="/swift-url/PercentEncodeSet"><span class="type">PercentEncodeSet</span></a> {
  <span class="keyword">var</span> <span class="variable">myEncodeSet</span>: <span class="type">MyEncodeSet</span>.<span class="type">Type</span> { <span class="variable">fatalError</span>(<span class="string literal">"</span><span class="string literal">Do not call</span><span class="string literal">"</span>) }
}

<span class="string literal">"</span><span class="string literal">a string</span><span class="string literal">"</span>.<span class="variable">percentEncoded</span>(<span class="variable">as</span>: \.<span class="variable">myEncodeSet</span>)
<span class="string literal">"</span><span class="string literal">a%20string</span><span class="string literal">"</span>.<span class="variable">percentDecoded</span>(<span class="variable">from</span>: \.<span class="variable">percentEncodedOnly</span>)
</code></pre></body></html>
</div>

    <section id="default implementations">
        <h2>Default Implementations</h2>

        <div role="article" class="function" id="percentencodesetprotocol.substitute(ascii:)">
    <h3>
        <code>substitute(ascii:​)</code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><span class="attribute">@</span><span class="attribute">inlinable</span> <span class="attribute">@</span><span class="attribute">inline</span>(<span class="variable">__always</span>)
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">substitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>? </code></pre>
</div>
</div>
<div role="article" class="function" id="percentencodesetprotocol.unsubstitute(ascii:)">
    <h3>
        <code>unsubstitute(ascii:​)</code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><span class="attribute">@</span><span class="attribute">inlinable</span> <span class="attribute">@</span><span class="attribute">inline</span>(<span class="variable">__always</span>)
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">unsubstitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>? </code></pre>
</div>
</div>
    </section>


    <section id="requirements">
        <h2>Requirements</h2>

        <div role="article" class="function" id="percentencodesetprotocol.shouldpercentencode(ascii:)">
    <h3>
        <code>should​Percent​Encode(ascii:​)</code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><span class="keyword">static</span> <span class="keyword">func</span> <span class="function">shouldPercentEncode</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">Bool</span></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Whether or not the given ASCII <code>codePoint</code> should be percent-encoded.</p>

</div>
</div>
<div role="article" class="function" id="percentencodesetprotocol.substitute(ascii:)">
    <h3>
        <code>substitute(ascii:​)</code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><span class="keyword">static</span> <span class="keyword">func</span> <span class="function">substitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>?</code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An optional function which allows the encode-set to replace a non-percent-encoded source codepoint with another codepoint.</p>

</div>
<div class="discussion">
    <p>For example, the <code>application/x-www-form-urlencoded</code> encoding does not percent-encode ASCII spaces (<code>0x20</code>) as &quot;%20&quot;,
instead replacing them with a &quot;+&quot; (<code>0x2B</code>). An implementation of this encoding would look like this:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">FormEncodeSet</span>: <a href="/swift-url/PercentEncodeSetProtocol"><span class="type">PercentEncodeSetProtocol</span></a> {

  <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">shouldPercentEncode</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">Bool</span> {
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x20</span> { <span class="keyword">return</span> <span class="keyword">false</span> } <span class="comment">// do not percent-encode spaces, substitute instead.</span>
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x2B</span> { <span class="keyword">return</span> <span class="keyword">true</span> } <span class="comment">// percent-encode "+"s in the source.</span>
    <span class="comment">// other codepoints...</span>
  }

  <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">substitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>? {
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x20</span> { <span class="keyword">return</span> <span class="number literal">0x2B</span> } <span class="comment">// Substitute spaces with "+".</span>
    <span class="keyword">return</span> <span class="keyword">nil</span>
  }

  <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">unsubstitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>? {
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x2B</span> { <span class="keyword">return</span> <span class="number literal">0x20</span> } <span class="comment">// Unsubstitute "+" to space.</span>
    <span class="keyword">return</span> <span class="keyword">nil</span>
  }
}
</code></pre></body></html>
<p>The ASCII percent sign (<code>0x25</code>) and upper- and lowercase alpha characters (<code>0x41...0x5A</code> and <code>0x61...0x7A</code>) must not be substituted.
Conforming types must also implement the reverse substitution function, <code>unsubstitute(ascii:)</code>, and should ensure that any codepoints emitted
as substitutes are percent-encoded by <code>shouldPercentEncode</code>.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>code​Point</th>
    <td><code class="type">UInt8</code></td>
    <td><p>The ASCII codepoint from the source. Always in the range <code>0...127</code>.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>The codepoint to emit instead of <code>codePoint</code>, or <code>nil</code> if the codepoint should not be substituted. If not <code>nil</code>, must always be in the range <code>0...127</code></p>

</div>
<div role="article" class="function" id="percentencodesetprotocol.unsubstitute(ascii:)">
    <h3>
        <code>unsubstitute(ascii:​)</code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><span class="keyword">static</span> <span class="keyword">func</span> <span class="function">unsubstitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>?</code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An optional function which recovers a non-percent-decoded codepoint from its substituted value.</p>

</div>
<div class="discussion">
    <p>For example, the <code>application/x-www-form-urlencoded</code> encoding does not percent-encode ASCII spaces (<code>0x20</code>) as &quot;%20&quot;,
instead replacing them with a &quot;+&quot; (<code>0x2B</code>). An implementation of this encoding would look like this:</p>

<html><body><pre class="highlight"><code><span class="keyword">struct</span> <span class="type">FormEncodeSet</span>: <a href="/swift-url/PercentEncodeSetProtocol"><span class="type">PercentEncodeSetProtocol</span></a> {

  <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">shouldPercentEncode</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">Bool</span> {
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x20</span> { <span class="keyword">return</span> <span class="keyword">false</span> } <span class="comment">// do not percent-encode spaces, substitute instead.</span>
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x2B</span> { <span class="keyword">return</span> <span class="keyword">true</span> } <span class="comment">// percent-encode "+"s in the source.</span>
    <span class="comment">// other codepoints...</span>
  }

  <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">substitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>? {
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x20</span> { <span class="keyword">return</span> <span class="number literal">0x2B</span> } <span class="comment">// Substitute spaces with "+".</span>
    <span class="keyword">return</span> <span class="keyword">nil</span>
  }

  <span class="keyword">static</span> <span class="keyword">func</span> <span class="function">unsubstitute</span>(<span class="variable">ascii</span> <span class="variable">codePoint</span>: <span class="type">UInt8</span>) -&gt; <span class="type">UInt8</span>? {
    <span class="keyword">if</span> <span class="variable">codePoint</span> == <span class="number literal">0x2B</span> { <span class="keyword">return</span> <span class="number literal">0x20</span> } <span class="comment">// Unsubstitute "+" to space.</span>
    <span class="keyword">return</span> <span class="keyword">nil</span>
  }
}
</code></pre></body></html>
<p>The ASCII percent sign (<code>0x25</code>) and upper- and lowercase alpha characters (<code>0x41...0x5A</code> and <code>0x61...0x7A</code>) must not be substituted.
Conforming types must also implement the substitution function, <code>substitute(ascii:)</code>, and should ensure that any codepoints emitted
as substitutes are percent-encoded by <code>shouldPercentEncode</code>.</p>

<p>Codepoints emitted by this function are not recognised as being part of a percent-encoded byte sequence, and values decoded from percent-encoded
byte sequences are assumed not to have been substituted.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>code​Point</th>
    <td><code class="type">UInt8</code></td>
    <td><p>The possibly-substituted ASCII codepoint from an encoded string. Always in the range <code>0...127</code>.</p>
</td>
</tr>
  </tbody>
</table>
  <h4>Returns</h4>
  <p>The codepoint to emit instead of <code>codePoint</code>, or <code>nil</code> if the codepoint was not substituted by this encode-set. If not <code>nil</code>, must always be in the range <code>0...127</code></p>

</div>
    </section>
        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2021-05-03T17:07:34+0000">May 3, 2021</time> using a fork of <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-beta.6</span>.
</p>
    </footer>
</body>
</html>
